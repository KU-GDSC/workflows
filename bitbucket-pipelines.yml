image: atlassian/default-image:3

pipelines:
  # Automated pipeline for syncing Bitbucket repository with its GitHub based on tags, ensuring real-time updates across platforms for releases
  tags:
    '*':
      - step:
          name: Sync GitHub On New Tag
          image: alpine/git:latest
          clone:
            depth: full
          script:
            - if [ -d "gdsc_workflows" ]; then rm -rf gdsc_workflows; fi
            - git clone --bare git@bitbucket.org:ku-gdsc/workflows.git gdsc_workflows
            - cd gdsc_workflows
            - git push git@github.com:ku-gdsc/workflows.git main:main --follow-tags
